<nav class="navbar navbar-light bg-dark text-light">
  <div class="container-fluid">
    <div
      class="navbar-brand text-light d-flex justify-content-center align-items-center bg-info"
    >
      <span class="display-2">{{ org }}</span>
    </div>
    <div class="me-auto">
      <div class="fs-4">
        {{ orgEmail }}
      </div>
      <div class="mt-2">
        {{ orgName }}
      </div>
    </div>

    <div
      routerLink="/profile"
      class="text-white mt-3 me-5"
      style="cursor: pointer"
    >
      <mat-icon
        aria-hidden="false"
        aria-label="Example home icon"
        fontIcon="home"
      ></mat-icon>
      <div>home</div>
    </div>
    <div
      class="mt-3 me-5 d-flex flex-column"
      style="cursor: pointer"
      (click)="updateOrg()"
    >
      <mat-icon
        class="ms-2"
        aria-hidden="false"
        aria-label="edit organization details"
        fontIcon="settings"
      ></mat-icon>
      <div class="mt-1">update org</div>
    </div>
    <div
      (click)="addProfile()"
      class="text-white mt-3 me-5"
      style="cursor: pointer"
    >
      <mat-icon
        aria-hidden="false"
        aria-label="Example add profile icon"
        fontIcon="person_add"
      ></mat-icon>
      <div>add User</div>
    </div>
    <div class="me-5 mt-3" (click)="logout()" style="cursor: pointer">
      <mat-icon
        aria-hidden="false"
        aria-label="Example logout icon"
        fontIcon="logout"
        class=""
      ></mat-icon>
      <div class="">logout</div>
    </div>
  </div>
</nav>

<div class="mt-3">
  <table class="container w-75">
    <tr class="">
      <th>index</th>
      <th>Name</th>
      <th>Email</th>
      <th>role</th>
      <th>edit</th>
      <th>delete</th>
    </tr>
    <tr *ngFor="let result of list.results; index as i">
      <td>{{ list.page * list.limit - list.limit + i + 1 }}</td>
      <td>{{ result.name }}</td>
      <td>{{ result.email }}</td>
      <td>{{ result.role }}</td>
      <td>
        <mat-icon
          aria-hidden="false"
          aria-label="Example edit icon"
          fontIcon="edit"
          style="cursor: pointer"
          (click)="updateUser(result._id, result.name, result.email)"
        ></mat-icon>
      </td>
      <td>
        <mat-icon
          aria-hidden="false"
          aria-label="Example edit icon"
          fontIcon="delete"
          style="cursor: pointer"
          (click)="deleteUser(result._id)"
        ></mat-icon>
      </td>
    </tr>
  </table>
  <div class="container w-75">
    <div class="text-secondary mt-3 d-flex flex-row-reverse">
      showing result {{ list.results.length }} out of {{ list.totalResults }}
    </div>
    <div class="">
      <nav aria-label="page navigation example">
        <ul class="pagination">
          <li
            class="page-item"
            (click)="gotoPage(list.page - 1)"
            [class.disabled]="list.page - 1 < 1"
          >
            <a class="page-link" style="cursor: pointer">&laquo;</a>
          </li>
          <li
            class="page-item"
            [hidden]="list.page - 2 <= 0"
            (click)="gotoPage(list.page - 2)"
          >
            <a class="page-link" style="cursor: pointer">{{ list.page - 2 }}</a>
        </li>
          <li
            class="page-item"
            [hidden]="list.page - 1 <= 0"
            (click)="gotoPage(list.page - 1)"
          >
            <a class="page-link" style="cursor: pointer">{{ list.page - 1 }}</a>
          </li>
          <li class="page-item" (click)="gotoPage(list.page)">
            <a class="page-link" style="cursor: pointer">{{ list.page }}</a>
          </li>
          <li
            class="page-item"
            [hidden]="list.page + 1 > list.totalPages"
            (click)="gotoPage(list.page + 1)"
          >
            <a class="page-link" style="cursor: pointer">{{ list.page + 1 }}</a>
          </li>
          <li
            class="page-item"
            [hidden]="list.page + 2 > list.totalPages"
            (click)="gotoPage(list.page + 2)"
          >
            <a class="page-link" style="cursor: pointer">{{ list.page + 2 }}</a>
          </li>
          <li
            class="page-item"
            [class.disabled]="list.page + 1 > this.list.totalPages"
            (click)="gotoPage(list.page + 1)"
          >
            <a class="page-link" style="cursor: pointer">&raquo;</a>
          </li>
          <li class="page-item ms-5 d-flex flex-row">
            <div class="w-75">users per page</div>
            <select
              id="page"
              name="page"
              class="form-select w-50"
              (change)="pagelimit($event)"
            >
              <option value="5">5</option>
              <option value="10" selected>10</option>
              <option value="15">15</option>
              <option value="20">20</option>
            </select>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
